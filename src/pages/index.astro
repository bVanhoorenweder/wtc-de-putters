---
import BaseLayout from '../layouts/BaseLayout.astro';
import GroupCard from '../components/GroupCard.astro';
import SponsorCarousel from '../components/SponsorCarousel.astro';
import { groups } from '../data/groups';
import { events } from '../data/events';

// Find next upcoming event
const now = new Date();
const futureEvents = events
  .filter(e => new Date(e.date) >= now)
  .sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime());
const nextEvent = futureEvents[0];

// Format next event date if exists
let nextEventDate = '';
if (nextEvent) {
  const eventDate = new Date(nextEvent.date);
  nextEventDate = eventDate.toLocaleDateString('nl-BE', {
    weekday: 'long',
    day: 'numeric',
    month: 'long',
    year: 'numeric'
  });
}
---

<BaseLayout>
  <!-- Section 1: Hero with Swiper -->
  <section class="relative bg-gradient-to-br from-putters-primary to-putters-blue text-white py-32 overflow-hidden">
    <!-- Background Pattern -->
    <div class="absolute inset-0 opacity-10">
      <div class="absolute inset-0" style="background-image: url('data:image/svg+xml,%3Csvg width=&quot;60&quot; height=&quot;60&quot; viewBox=&quot;0 0 60 60&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;%3E%3Cg fill=&quot;none&quot; fill-rule=&quot;evenodd&quot;%3E%3Cg fill=&quot;%23ffffff&quot; fill-opacity=&quot;1&quot;%3E%3Cpath d=&quot;M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z&quot;/%3E%3C/g%3E%3C/g%3E%3C/svg%3E');"></div>
    </div>

    <!-- Swiper Container -->
    <div class="swiper hero-swiper relative z-10">
      <div class="swiper-wrapper">
        <!-- Slide 1: Welcome -->
        <div class="swiper-slide">
          <div class="container mx-auto px-4">
            <div class="max-w-4xl mx-auto text-center">
              <h1 class="text-hero font-heading font-bold mb-6 leading-tight">Welkom bij WTC De Putters</h1>
              <p class="text-subtitle mb-8 leading-relaxed">Samen fietsen, samen plezier! Inclusief voor alle niveaus.</p>
              <a href="/lid-worden" class="btn-primary">Word Lid</a>
            </div>
          </div>
        </div>

        <!-- Slide 2: Join Us -->
        <div class="swiper-slide">
          <div class="container mx-auto px-4">
            <div class="max-w-4xl mx-auto text-center">
              <h1 class="text-hero font-heading font-bold mb-6 leading-tight">Sluit je aan!</h1>
              <p class="text-subtitle mb-8 leading-relaxed">Lidgeld 2026: ‚Ç¨60 (individueel) / ‚Ç¨80 (familie)</p>
              <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a href="/lid-worden" class="px-10 py-5 bg-white text-putters-primary rounded-full font-heading font-bold text-xl hover:shadow-2xl transition-all duration-300 hover:scale-105">
                  Meer Info
                </a>
                <a href="/groepen" class="px-10 py-5 bg-transparent border-2 border-white text-white rounded-full font-heading font-bold text-xl hover:bg-white hover:text-putters-primary transition-all duration-300">
                  Bekijk Groepen
                </a>
              </div>
            </div>
          </div>
        </div>

        <!-- Slide 3: Community -->
        <div class="swiper-slide">
          <div class="container mx-auto px-4">
            <div class="max-w-4xl mx-auto text-center">
              <h1 class="text-hero font-heading font-bold mb-6 leading-tight">Ploeggeest boven alles</h1>
              <p class="text-subtitle mb-8 leading-relaxed">"Samen Uit, Samen Thuis" - Niemand wordt achtergelaten</p>
              <a href="/werking" class="btn-primary">Onze Werking</a>
            </div>
          </div>
        </div>
      </div>

      <!-- Navigation Arrows -->
      <div class="swiper-button-prev !text-white"></div>
      <div class="swiper-button-next !text-white"></div>

      <!-- Pagination Dots -->
      <div class="swiper-pagination !bottom-8"></div>
    </div>

    <!-- Bottom Wave -->
    <div class="absolute bottom-0 left-0 right-0">
      <svg viewBox="0 0 1440 120" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-full">
        <path d="M0 0L60 10C120 20 240 40 360 46.7C480 53 600 47 720 43.3C840 40 960 40 1080 46.7C1200 53 1320 67 1380 73.3L1440 80V120H1380C1320 120 1200 120 1080 120C960 120 840 120 720 120C600 120 480 120 360 120C240 120 120 120 60 120H0V0Z" fill="#F4F4F4"/>
      </svg>
    </div>
  </section>

  <!-- Section 2: Why Choose Us -->
  <section class="section-padding bg-white" data-cue="fadeIn">
    <div class="container mx-auto px-4">
      <div class="max-w-6xl mx-auto">
        <!-- Section Header -->
        <div class="text-center mb-16">
          <h2 class="text-h2 font-heading font-bold text-putters-heading mb-4">Waarom WTC De Putters?</h2>
          <p class="text-lg text-putters-text max-w-2xl mx-auto">
            Ontdek wat ons uniek maakt als wielertoeristenclub
          </p>
        </div>

        <!-- Feature Cards Grid -->
        <div class="grid md:grid-cols-3 gap-8 mb-12">
          <!-- Feature 1 -->
          <div class="text-center p-8 bg-gradient-to-br from-putters-primary/5 to-putters-primary/10 rounded-xl hover:shadow-lg transition-shadow duration-300" data-cue="slideInUp">
            <div class="w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-putters-primary to-green-500 rounded-full flex items-center justify-center">
              <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
              </svg>
            </div>
            <h3 class="text-xl font-heading font-bold text-putters-heading mb-3">Ploeggeest</h3>
            <p class="text-putters-text">
              "Samen Uit, Samen Thuis" - Niemand wordt achtergelaten, we steunen elkaar bij pech
            </p>
          </div>

          <!-- Feature 2 -->
          <div class="text-center p-8 bg-gradient-to-br from-putters-secondary/5 to-putters-secondary/10 rounded-xl hover:shadow-lg transition-shadow duration-300" data-cue="slideInUp" data-cue-delay="100">
            <div class="w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-putters-secondary to-pink-500 rounded-full flex items-center justify-center">
              <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
            </div>
            <h3 class="text-xl font-heading font-bold text-putters-heading mb-3">Voor Iedereen</h3>
            <p class="text-putters-text">
              4 groepen van recreatief tot sportief - iedereen vindt zijn niveau bij ons
            </p>
          </div>

          <!-- Feature 3 -->
          <div class="text-center p-8 bg-gradient-to-br from-putters-blue/5 to-putters-blue/10 rounded-xl hover:shadow-lg transition-shadow duration-300" data-cue="slideInUp" data-cue-delay="200">
            <div class="w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-putters-blue to-blue-500 rounded-full flex items-center justify-center">
              <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
            </div>
            <h3 class="text-xl font-heading font-bold text-putters-heading mb-3">Wekelijkse Ritten</h3>
            <p class="text-putters-text">
              Woensdag en zondag rijden we uit - altijd een moment om te fietsen!
            </p>
          </div>
        </div>

        <!-- Quote Banner -->
        <div class="bg-gradient-to-r from-putters-primary to-putters-secondary text-white rounded-2xl p-10 text-center shadow-xl" data-cue="zoomIn">
          <p class="text-3xl font-heading font-bold mb-3 italic">
            "Samen Uit, Samen Thuis"
          </p>
          <p class="text-lg opacity-90">
            Ons motto dat onze ploeggeest perfect samenvat
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Section 3: Groups -->
  <section class="section-padding bg-white" data-cue="fadeIn">
    <div class="container mx-auto px-4">
      <h2 class="section-title">Onze Groepen</h2>
      <p class="section-subtitle max-w-2xl mx-auto">
        Vier groepen voor elk niveau - van recreatief tot sportief
      </p>

      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8 max-w-7xl mx-auto">
        {groups.map((group, index) => (
          <div data-cue="slideInUp" data-cue-delay={index * 100} class="h-full">
            <GroupCard group={group} variant="compact" />
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Section 4: Stats/Counter -->
  <section class="section-padding bg-gradient-to-br from-putters-blue to-putters-primary text-white" data-cue="fadeIn">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-2 lg:grid-cols-4 gap-8 max-w-5xl mx-auto">
        <!-- Stat 1 -->
        <div class="text-center">
          <div class="text-6xl font-heading font-bold mb-2">15+</div>
          <div class="text-xl opacity-90">Jaar Actief</div>
        </div>

        <!-- Stat 2 -->
        <div class="text-center">
          <div class="text-6xl font-heading font-bold mb-2">100+</div>
          <div class="text-xl opacity-90">Leden</div>
        </div>

        <!-- Stat 3 -->
        <div class="text-center">
          <div class="text-6xl font-heading font-bold mb-2">2x</div>
          <div class="text-xl opacity-90">Per Week</div>
        </div>

        <!-- Stat 4 -->
        <div class="text-center">
          <div class="text-6xl font-heading font-bold mb-2">10+</div>
          <div class="text-xl opacity-90">Events/Jaar</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Section 4.5: Next Event -->
  {nextEvent && (
    <section class="py-16 bg-putters-gray-bg" data-cue="fadeIn">
      <div class="container mx-auto px-4">
        <div class="max-w-4xl mx-auto">
          <!-- Event Card -->
          <div class="bg-white rounded-lg shadow-md p-8">
            <!-- Header -->
            <div class="mb-6 pb-6 border-b border-gray-200">
              <div class="text-sm text-putters-primary font-heading font-semibold mb-2">Volgend Event</div>
              <h3 class="text-3xl font-heading font-bold text-putters-heading mb-2">
                {nextEvent.title}
              </h3>
              <p class="text-lg text-putters-text">
                {nextEventDate}
                {nextEvent.time && ` ‚Ä¢ ${nextEvent.time}`}
              </p>
            </div>

            <!-- Event Details Grid -->
            <div class="grid md:grid-cols-2 gap-4 mb-6">
              <!-- Location -->
              <div class="flex items-start gap-2">
                <span class="text-xl">üìç</span>
                <div>
                  <div class="text-sm font-semibold text-gray-600">Locatie</div>
                  <div class="text-putters-text">{nextEvent.location}</div>
                </div>
              </div>

              <!-- Distance -->
              {nextEvent.distance && (
                <div class="flex items-start gap-2">
                  <span class="text-xl">üö¥</span>
                  <div>
                    <div class="text-sm font-semibold text-gray-600">Afstand</div>
                    <div class="text-putters-text">{nextEvent.distance}</div>
                  </div>
                </div>
              )}

              <!-- Price -->
              {nextEvent.price && (
                <div class="flex items-start gap-2">
                  <span class="text-xl">üí∞</span>
                  <div>
                    <div class="text-sm font-semibold text-gray-600">Prijs</div>
                    <div class="text-putters-text">{nextEvent.price}</div>
                  </div>
                </div>
              )}

              <!-- Category -->
              <div class="flex items-start gap-2">
                <span class="text-xl">{nextEvent.category === 'annual' ? 'üîÑ' : '‚ú®'}</span>
                <div>
                  <div class="text-sm font-semibold text-gray-600">Type</div>
                  <div class="text-putters-text">
                    {nextEvent.category === 'annual' ? 'Jaarlijks Event' : 'Eenmalig Event'}
                  </div>
                </div>
              </div>
            </div>

            <!-- Description -->
            {nextEvent.description && (
              <div class="mb-6 pt-4 border-t border-gray-100">
                <p class="text-putters-text leading-relaxed">
                  {nextEvent.description}
                </p>
              </div>
            )}

            <!-- CTA Buttons -->
            <div class="flex flex-col sm:flex-row gap-3 pt-4">
              <a
                href={nextEvent.url || `mailto:bestuur@wtcdeputters.be?subject=Interesse%20in%20${encodeURIComponent(nextEvent.title)}`}
                target={nextEvent.url ? '_blank' : undefined}
                rel={nextEvent.url ? 'noopener' : undefined}
                class="px-6 py-3 bg-putters-primary text-white rounded-lg font-heading font-semibold hover:bg-putters-primary/90 transition-colors text-center"
              >
                Meer Info
              </a>
              <a
                href="/events"
                class="px-6 py-3 bg-white border border-gray-300 text-putters-text rounded-lg font-heading font-semibold hover:border-putters-primary hover:text-putters-primary transition-colors text-center"
              >
                Alle Events
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>
  )}

  <!-- Section 5: CTA Cards -->
  <section class="section-padding bg-putters-gray-bg" data-cue="fadeIn">
    <div class="container mx-auto px-4">
      <div class="grid md:grid-cols-2 gap-8 max-w-5xl mx-auto">
        <!-- Word Lid Card -->
        <div class="card-hover bg-gradient-to-br from-putters-secondary to-pink-500 text-white rounded-2xl shadow-lg p-10 relative overflow-hidden">
          <div class="absolute top-0 right-0 text-9xl opacity-10">üíù</div>
          <div class="relative z-10">
            <h2 class="text-4xl font-heading font-bold mb-4">Word Lid</h2>
            <p class="text-xl mb-6 opacity-90">Sluit je aan bij onze club en geniet van wekelijkse ritten en events.</p>
            <p class="text-lg mb-6 font-semibold">Lidgeld 2026: ‚Ç¨60 (individueel) / ‚Ç¨80 (familie)</p>
            <a href="/lid-worden" class="inline-block px-8 py-4 bg-white text-putters-secondary rounded-full font-heading font-bold text-lg hover:shadow-xl transition-all duration-300 hover:scale-105">
              Meer Info
            </a>
          </div>
        </div>

        <!-- Ritten Card -->
        <div class="card-hover bg-gradient-to-br from-putters-primary to-green-600 text-white rounded-2xl shadow-lg p-10 relative overflow-hidden">
          <div class="absolute top-0 right-0 text-9xl opacity-10">üìç</div>
          <div class="relative z-10">
            <h2 class="text-4xl font-heading font-bold mb-4">Download Ritten</h2>
            <p class="text-xl mb-6 opacity-90">Ontdek onze mooiste routes en download GPX-bestanden voor je fietscomputer.</p>
            <p class="text-lg mb-6 font-semibold">10+ routes beschikbaar</p>
            <a href="/ritten" class="inline-block px-8 py-4 bg-white text-putters-primary rounded-full font-heading font-bold text-lg hover:shadow-xl transition-all duration-300 hover:scale-105">
              Bekijk Ritten
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Section 6: Sponsors Carousel -->
  <SponsorCarousel />

  <!-- Initialize Swiper for Hero -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Initialize ScrollCue
      // @ts-ignore
      if (typeof scrollCue !== 'undefined') {
        // @ts-ignore
        scrollCue.init({
          duration: 600,
          interval: -0.7,
          percentage: 0.8
        });
      }

      // Initialize Hero Swiper
      // @ts-ignore
      if (typeof Swiper !== 'undefined') {
        // @ts-ignore
        new Swiper('.hero-swiper', {
          effect: 'fade',
          speed: 1000,
          autoplay: {
            delay: 5000,
            disableOnInteraction: false,
          },
          pagination: {
            el: '.swiper-pagination',
            clickable: true,
          },
          navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
          },
          fadeEffect: {
            crossFade: true
          },
        });
      }
    });
  </script>

  <style>
    /* Swiper Pagination for Hero */
    :global(.hero-swiper .swiper-pagination-bullet) {
      background: white;
      opacity: 0.5;
    }

    :global(.hero-swiper .swiper-pagination-bullet-active) {
      opacity: 1;
    }
  </style>
</BaseLayout>