---
import type { Rit } from '../data/ritten';

interface Props {
  rit: Rit;
}

const { rit } = Astro.props;

// Difficulty colors
const difficultyConfig = {
  'Makkelijk': { bg: 'from-green-500 to-emerald-500', badge: 'bg-green-500', icon: 'ğŸ˜Š' },
  'Gemiddeld': { bg: 'from-orange-500 to-amber-500', badge: 'bg-orange-500', icon: 'ğŸ’ª' },
  'Zwaar': { bg: 'from-red-500 to-rose-500', badge: 'bg-red-500', icon: 'ğŸ”¥' }
};

const config = difficultyConfig[rit.difficulty];

// Group colors
const groupColors = {
  'A': 'bg-red-500',
  'B': 'bg-encox-primary',
  'C': 'bg-blue-500',
  'D': 'bg-purple-500'
};
---

<div class="group bg-white rounded-xl shadow-lg hover:shadow-2xl transition-all duration-400 overflow-hidden hover:-translate-y-2">
  <!-- Header with gradient -->
  <div class={`bg-gradient-to-r ${config.bg} text-white p-6 relative overflow-hidden`}>
    <div class="absolute top-0 right-0 text-9xl opacity-10 select-none">ğŸš´</div>

    <!-- Group badges -->
    <div class="absolute top-4 right-4 flex gap-2">
      {rit.groups.map(group => (
        <span class={`${groupColors[group]} text-white px-3 py-1 rounded-full text-sm font-bold`}>
          {group}
        </span>
      ))}
    </div>

    <div class="relative z-10">
      <div class="text-sm font-semibold uppercase tracking-wider opacity-90 mb-2">
        {rit.difficulty} {config.icon}
      </div>
      <div class="text-3xl font-heading font-bold">{rit.title}</div>
      <div class="flex gap-4 mt-3 text-sm opacity-90">
        <span>ğŸ“ {rit.distance} km</span>
        {rit.elevation && <span>â›°ï¸ {rit.elevation}m</span>}
        {rit.duration && <span>â±ï¸ {rit.duration}</span>}
      </div>
    </div>
  </div>

  <!-- Content -->
  <div class="p-6">
    <!-- Description -->
    <p class="text-encox-text leading-relaxed mb-4">
      {rit.description}
    </p>

    <!-- Highlights -->
    {rit.highlights && rit.highlights.length > 0 && (
      <div class="mb-6">
        <h4 class="font-heading font-bold text-sm text-encox-heading mb-2 uppercase">Highlights:</h4>
        <div class="flex flex-wrap gap-2">
          {rit.highlights.map(highlight => (
            <span class="bg-encox-gray-bg text-encox-text px-3 py-1 rounded-full text-sm">
              âœ“ {highlight}
            </span>
          ))}
        </div>
      </div>
    )}

    <!-- Download Buttons -->
    <div class="flex flex-col sm:flex-row gap-3 pt-4 border-t border-gray-200">
      <!-- GPX Download -->
      <a
        href={rit.gpxUrl}
        download
        class="flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-encox-primary text-white rounded-lg font-semibold hover:bg-opacity-90 transition-all hover:scale-105 shadow-md"
      >
        <span>ğŸ“¥</span>
        <span>Download GPX</span>
      </a>

      <!-- Garmin Link (optional) -->
      {rit.garminUrl && (
        <a
          href={rit.garminUrl}
          target="_blank"
          rel="noopener"
          class="flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-encox-blue text-white rounded-lg font-semibold hover:bg-opacity-90 transition-all hover:scale-105 shadow-md"
        >
          <span>ğŸ“</span>
          <span>Garmin Connect</span>
        </a>
      )}
    </div>
  </div>
</div>