---
import type { Event } from '../data/events';

interface Props {
  event: Event;
}

const { event } = Astro.props;

// Format date
const eventDate = new Date(event.date);
const formattedDate = eventDate.toLocaleDateString('nl-BE', {
  day: 'numeric',
  month: 'long',
  year: 'numeric'
});

// Category colors
const categoryColors = {
  upcoming: { bg: 'from-encox-orange to-red-500', badge: 'bg-encox-orange' },
  annual: { bg: 'from-encox-primary to-green-500', badge: 'bg-encox-primary' },
  past: { bg: 'from-gray-400 to-gray-500', badge: 'bg-gray-400' }
};

const colors = categoryColors[event.category];
---

<div class="group bg-white rounded-xl shadow-lg hover:shadow-2xl transition-all duration-400 overflow-hidden hover:-translate-y-2">
  <!-- Date Header with Gradient -->
  <div class={`bg-gradient-to-r ${colors.bg} text-white p-6 relative overflow-hidden`}>
    <div class="absolute top-0 right-0 text-9xl opacity-10 select-none">ğŸ“…</div>
    <div class="relative z-10">
      <div class="text-sm font-semibold uppercase tracking-wider opacity-90">
        {event.category === 'upcoming' ? 'Binnenkort' : event.category === 'annual' ? 'Jaarlijks Event' : 'Afgelopen'}
      </div>
      <div class="text-3xl font-heading font-bold mt-1">{formattedDate}</div>
      {event.time && (
        <div class="text-lg mt-1 opacity-90">â° {event.time}</div>
      )}
    </div>
  </div>

  <!-- Content -->
  <div class="p-6">
    <h3 class="text-2xl font-heading font-bold text-encox-heading mb-3 group-hover:text-encox-primary transition-colors">
      {event.title}
    </h3>

    <div class="space-y-3 mb-6">
      <!-- Location -->
      <div class="flex items-start gap-2 text-encox-text">
        <span class="text-xl">ğŸ“</span>
        <span>{event.location}</span>
      </div>

      <!-- Distance -->
      {event.distance && (
        <div class="flex items-start gap-2 text-encox-text">
          <span class="text-xl">ğŸš´</span>
          <span>{event.distance}</span>
        </div>
      )}

      <!-- Price -->
      {event.price && (
        <div class="flex items-start gap-2 text-encox-text">
          <span class="text-xl">ğŸ’°</span>
          <span>{event.price}</span>
        </div>
      )}
    </div>

    <!-- Description -->
    <p class="text-encox-text leading-relaxed mb-6">
      {event.description}
    </p>

    <!-- CTA -->
    {event.category === 'upcoming' || event.category === 'annual' ? (
      <a
        href="mailto:bestuur@wtcdeputters.be?subject=Interesse%20in%20{encodeURIComponent(event.title)}"
        class="inline-flex items-center gap-2 text-encox-primary font-bold hover:text-encox-secondary transition-colors group"
      >
        <span>Meer info / Inschrijven</span>
        <span class="group-hover:translate-x-1 transition-transform">â†’</span>
      </a>
    ) : (
      <span class="text-gray-400 italic">Event afgelopen</span>
    )}
  </div>
</div>